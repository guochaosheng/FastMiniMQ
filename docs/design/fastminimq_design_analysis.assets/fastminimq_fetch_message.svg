<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="728px" height="262px" viewBox="-0.5 -0.5 728 262" content="&lt;mxfile modified=&quot;2020-07-20T17:10:13.562Z&quot; host=&quot;www.liuchengtu.com&quot; agent=&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/83.0.4103.116 Safari/537.36&quot; etag=&quot;rRfvAbJPcrs2gmlIdbJY&quot; version=&quot;11.1.4&quot; type=&quot;online&quot;&gt;&lt;diagram id=&quot;1mYBRBp58ypwF8P3mhrY&quot; name=&quot;第 1 页&quot;&gt;7Vtbd6M2EP41eu1BXAQ84tv2JT3bbs/p7iMxis0pNi6QxOmv74yQZEDEd1Jnj/MSadBl9M03I2nAxBmvtl+KeLN8yBOeEdtKtsSZENumlsPgH0reagmjUrAo0kQ22gm+pf9y1VNKn9OEl62GVZ5nVbppC+f5es3nVUsWF0X+2m72lGftWTfxghuCb/M4M6V/pUm1rKWBZ+3kv/J0sVQzU0s+WcWqsRSUyzjJXxsiZ0qccZHnVV1abcc8Q/AULnW/2TtPtWIFX1fHdHDqDi9x9izXJvWq3tRi+TqJEDOozbO4LNM5cUbLapWBgEIRZirevkPFUpUfWPnFU9XJtvlw8iZrT/m6msWrNEPBF54XizQGsbkCZeG4WHAp8moRT1p2kkuEsVYcZoIGrzvrKOMsG4ZRsoJncZW+tK0bS5Is9HB6hq95CsrZliK0jasVnSShbYWjGqTMn4s5l/2a9ugMZbODQ9U4GENBobH0nUgYvN/47mHjF/nzOuGJNPXrMq34t008x6ev4NttJpxq0RdeVHy714Dyqet3YaGhtF3DxNTusbFq12fOFnZ7gPKO8JIsg+jDD4MUl5s6JD2lWwR2QNRs5ndRY6GJmuWZqGnhJbCxTwpbwNqgBYEBGgtMzJTsEsj8k+LxOl/zTjDeptX3XfiF2g8VfKG8i8RYOTcQ17Gs5RnN2MxuKjYb8dQLOgHh2NAMu3h3KKcz1PVCc3AlHtCjWaC3cdraxq+8id+5Mzx3wku508+Egwe6Xs7pOHT92MNM/tzWufCT8kfdsq5MIHoGfeidPJ+NPOq4dfEJ5n5++cw0sIegwYCbyZ0IAxHhtAzTcUTYvy30J6QObT938twgecwMlUftB2KzeIX5gfVjuRE2ssjUJ8GURDMy9choQiKbTBkJfRJ5QjLDMrQZjUnooCSakDDAQjAmo8igZMW3VZuHZVXkf/NxnuWFaOJY4g+Zk2aZkkv+xlm6WEN1DqzhIB9h9iGdx1kkH6zSJMneS3vskm44fBKXS52Bw8rXuIJB10JiW/aguRDHc1vGpm5PAsntIa59hbQbPSbvdig7/cGXkts6RLpdZ3W6znqs35sZ2AET0/SYzOHpabDhbhP3DWAgIvTkQy+M9PjIFb080cYzmNUOvwfy0nu2hQHz+oZbW2aKmtJwoLDck5wEMEOK5pi6ZBQg5qYJDJyX+erxubxVjN0uxqznjZO67jYx7rrDWRiflsS7mRezihs3Evb0G0FlQ19b9fI3s47fGep6cc8+LQW39+RzyqugHWV2LBn68qQo06KRf1M0MkzPvKvtnswabPe0e3JxP8H25/pe9yjqsp7QPNCtRLliC1XjBPIzoGpTJfkQXK/xLdIZt71biXnuTYU8877numfGPM/4PMrpfpTzTswDW8dvjWYbbFC+rzTcRN7Zo3ccrMc8O6Qe8c3UeRvzsTnNNkk/+P38fV++yr7ck9eCfTlySECxEI56r0un7CD/a9LQs42txDLvTqyHFyrxc9E+YiaPfvDSgPNQhlcmlX7q5K4ZmB0zvTtUdrfnW7ff8ruZek5mppk881w2mJn6PkVjGRolSV+guKjEMk3RpYk6hlXsLlJKgaVyS5HINo1EG+g1JWFdgGuNL0a2SDATcTQigSsGZCTwGlOADqHoHqIOcB+azlANmBcbwwhMzAUaijwWXJLCUBQmQg1QbCwKgWhDcZzAIVGtfIDT9aw0QFVBtxoNGHPq4CCBhhMscQBRKXosupKDXWdxWT2k6/Thd2JbCiShJqwVVMalwIpDAclYrnJEUbvmmqAQaju4wnqUjEYt/NAgUwkAAgng2eIR4MFEYx+xB1ROB6BneK2Ctrdxw92p8J5VZpIKUK5tiZlMzT+xIyNLmCC0J3rNxKQeUi1kfSTTkJjrNnU2FROoI+0aanROCKhzJLguGImE1op9ILeErkAVjeZUaj/yW7qCQuFMRoWg9lTwQuH66Fg+LgO0r30XXDm0qWU9aCA9/KYE6jV/pbcLSCPWF0cML7UtryT1q2LNlNAVOrlimF4n1WY0XcVDpJGD9Qwz0Z0JE2nnEa6CL5jV5JoojfgEbZHTQotgupflCox6MBdlSJs6REZ7R93Dw9MdEUxlCRBgMRPhN8eYPBBxxxEL84RL7Yn/ZkgX3iZ3hHrdtUcqd6nDjYxWIm5rp8dHOtr7uFZUXq0bKWiJxgpI26IWXvY04Q7vIdpjj+IitS4hYwMAmKIVimtIgiON2pUOfOlQh7KMP1WDHpoYbWf+aWDeQPSbmtaZ6Rqvb3q+wf4z36RzEP3B53mRiMI/z7ys7ide03jmD+r0dyit707cqxx5obr7wWV9nd/9bNWZ/gc=&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g><path d="M 7.5 73 L 148.13 72.52" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 153.38 72.5 L 146.39 76.03 L 148.13 72.52 L 146.37 69.03 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="357.5" y="41" width="120" height="90" rx="13.5" ry="13.5" fill="#ffffff" stroke="#000000" pointer-events="none"/><ellipse cx="207" cy="72.5" rx="52.5" ry="52.5" fill="#ffffff" stroke="#000000" pointer-events="none"/><ellipse cx="207" cy="73" rx="34" ry="34" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 207 20 L 207 39" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 244.12 35.38 L 231.04 48.96" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 241 73 L 259.5 72.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 231.04 97.04 L 244.12 109.62" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 169.88 35.38 L 182.96 48.96" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 154.5 72.5 L 173 73" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 169.88 109.62 L 182.96 97.04" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="241" y="0" width="140" height="20" fill="none" stroke="#000000" stroke-dasharray="1 2" pointer-events="none"/><g transform="translate(251.5,3.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="119" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Georgia; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 120px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">512M  环形日志缓存区</div></div></foreignObject><text x="60" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Georgia">512M  环形日志缓存区</text></switch></g><path d="M 259.5 72.5 L 351.13 72.97" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 356.38 72.99 L 349.36 76.46 L 351.13 72.97 L 349.4 69.46 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 207 125 L 207 107" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="147.5" y="159" width="119" height="20" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(152.5,162.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="108" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Georgia; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 109px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">环形日志缓存区索引</div></div></foreignObject><text x="54" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Georgia">环形日志缓存区索引</text></switch></g><path d="M 207 211 L 262.5 226 L 207 241 L 151.5 226 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(182.5,219.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="48" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Georgia; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 49px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">命中缓存</div></div></foreignObject><text x="24" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Georgia">命中缓存</text></switch></g><path d="M 7 225.5 L 145.13 225.98" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 150.38 226 L 143.37 229.47 L 145.13 225.98 L 143.39 222.47 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 207 211 L 207 185.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 207 180.12 L 210.5 187.12 L 207 185.37 L 203.5 187.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="362.5" y="97" width="110" height="20" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(405.5,100.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="24" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Georgia; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 25px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">索引</div></div></foreignObject><text x="12" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Georgia">索引</text></switch></g><rect x="362.5" y="72.5" width="110" height="20" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(405.5,76.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="24" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Georgia; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 25px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">日志</div></div></foreignObject><text x="12" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Georgia">日志</text></switch></g><path d="M 262.5 226 L 407.5 226 Q 417.5 226 417.5 216 L 417.5 137.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 417.5 132.12 L 421 139.12 L 417.5 137.37 L 414 139.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 207 125 L 207 152.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 207 157.88 L 203.5 150.88 L 207 152.63 L 210.5 150.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="412.5" y="51" width="60" height="16" fill="#ffffff" stroke="#000000" stroke-dasharray="1 2" pointer-events="none"/><g transform="translate(430.5,52.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="24" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Georgia; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 25px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">磁盘</div></div></foreignObject><text x="12" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Georgia">磁盘</text></switch></g><g transform="translate(218.5,193.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="18" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Georgia; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 20px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">Yes</div></div></foreignObject><text x="9" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Georgia">Yes</text></switch></g><g transform="translate(319.5,209.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="16" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Georgia; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 16px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">No</div></div></foreignObject><text x="8" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Georgia">No</text></switch></g><rect x="497" y="31" width="230" height="230" fill="#ffffff" stroke="#000000" stroke-dasharray="1 2" pointer-events="none"/><g transform="translate(499.5,38.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="226" height="214" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Georgia; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 226px; white-space: nowrap; overflow-wrap: normal; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;"><div><div>环形日志缓存区是一个固定大小的内存空间，其保留着最近部分日志记录。</div><div><br /></div><div>FastMiniMQ 将消费需求分成两类，实时和离线。</div><div>实时类的索引和日志访问都是直接读取内存，离线类的日志则是磁盘随机读。</div><div><br /></div><div>假设刷盘速率平均每秒100M，512 M 大约缓存最近 5s 的生产记录，消费延迟要求为 5s 内的属于实时类，5s 以上的属于离线类。</div><div>根据刷盘速率调整缓存区大小可以控制分界时间点。同上 1024 M 内存空间则缓存最近 10s 的生产记录，以此类推。</div></div></div></div></foreignObject><text x="113" y="113" fill="#000000" text-anchor="middle" font-size="12px" font-family="Georgia">[Not supported by viewer]</text></switch></g><g transform="translate(21.5,208.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="116" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Georgia; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 117px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">Topic Record Request</div></div></foreignObject><text x="58" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Georgia">Topic Record Request</text></switch></g></g></svg>